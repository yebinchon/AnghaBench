#define NULL ((void*)0)
typedef unsigned long size_t;  // Customize by platform.
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;  // Either arithmetic or pointer type.
/* By default, we understand bool (as a convenience). */
typedef int bool;
#define false 0
#define true 1

/* Forward declarations */
typedef  struct TYPE_20__   TYPE_5__ ;
typedef  struct TYPE_19__   TYPE_4__ ;
typedef  struct TYPE_18__   TYPE_3__ ;
typedef  struct TYPE_17__   TYPE_2__ ;
typedef  struct TYPE_16__   TYPE_1__ ;

/* Type definitions */
struct TYPE_17__ {int /*<<< orphan*/  q; } ;
typedef  TYPE_2__ record_pqueue ;
struct TYPE_18__ {TYPE_5__* data; } ;
typedef  TYPE_3__ pitem ;
struct TYPE_20__ {int /*<<< orphan*/  recordinfo; int /*<<< orphan*/  rrec; int /*<<< orphan*/  rbuf; scalar_t__ packet_length; int /*<<< orphan*/ * packet; } ;
struct TYPE_19__ {scalar_t__ state; TYPE_1__* s3; scalar_t__ packet_length; int /*<<< orphan*/ * packet; } ;
struct TYPE_16__ {int /*<<< orphan*/  rrec; int /*<<< orphan*/  rbuf; } ;
typedef  int /*<<< orphan*/  SSL3_RECORD ;
typedef  int /*<<< orphan*/  SSL3_BUFFER ;
typedef  TYPE_4__ SSL ;
typedef  TYPE_5__ DTLS1_RECORD_DATA ;

/* Variables and functions */
 int /*<<< orphan*/  BIO_CTRL_DGRAM_SCTP_GET_RCVINFO ; 
 int /*<<< orphan*/  FUNC0 (int /*<<< orphan*/ ,int /*<<< orphan*/ ,int,int /*<<< orphan*/ *) ; 
 scalar_t__ FUNC1 (int /*<<< orphan*/ ) ; 
 int /*<<< orphan*/  ERR_R_INTERNAL_ERROR ; 
 int /*<<< orphan*/  FUNC2 (TYPE_5__*) ; 
 TYPE_5__* FUNC3 (int) ; 
 scalar_t__ SSL3_ST_CR_FINISHED_A ; 
 scalar_t__ SSL3_ST_SR_FINISHED_A ; 
 int /*<<< orphan*/  SSL_F_DTLS1_BUFFER_RECORD ; 
 int /*<<< orphan*/  FUNC4 (TYPE_4__*) ; 
 int /*<<< orphan*/  FUNC5 (int /*<<< orphan*/ ,int /*<<< orphan*/ ) ; 
 int /*<<< orphan*/  FUNC6 (int /*<<< orphan*/ *,int /*<<< orphan*/ *,int) ; 
 int /*<<< orphan*/  FUNC7 (int /*<<< orphan*/ *,int /*<<< orphan*/ ,int) ; 
 int /*<<< orphan*/  FUNC8 (TYPE_3__*) ; 
 TYPE_3__* FUNC9 (unsigned char*,TYPE_5__*) ; 
 int /*<<< orphan*/ * FUNC10 (int /*<<< orphan*/ ,TYPE_3__*) ; 
 int FUNC11 (int /*<<< orphan*/ ) ; 
 int /*<<< orphan*/  FUNC12 (TYPE_4__*) ; 

__attribute__((used)) static int
FUNC13(SSL *s, record_pqueue *queue, unsigned char *priority)
	{
	DTLS1_RECORD_DATA *rdata;
	pitem *item;

	if (FUNC11(queue->q) >= 100)
		return 0;
		
	rdata = FUNC3(sizeof(DTLS1_RECORD_DATA));
	item = FUNC9(priority, rdata);
	if (rdata == NULL || item == NULL)
		{
		if (rdata != NULL) FUNC2(rdata);
		if (item != NULL) FUNC8(item);
		
		FUNC5(SSL_F_DTLS1_BUFFER_RECORD, ERR_R_INTERNAL_ERROR);
		return(0);
		}
	
	rdata->packet = s->packet;
	rdata->packet_length = s->packet_length;
	FUNC6(&(rdata->rbuf), &(s->s3->rbuf), sizeof(SSL3_BUFFER));
	FUNC6(&(rdata->rrec), &(s->s3->rrec), sizeof(SSL3_RECORD));

	item->data = rdata;

#ifndef OPENSSL_NO_SCTP
	if (FUNC1(FUNC4(s)) &&
	    (s->state == SSL3_ST_SR_FINISHED_A || s->state == SSL3_ST_CR_FINISHED_A)) {
		FUNC0(FUNC4(s), BIO_CTRL_DGRAM_SCTP_GET_RCVINFO, sizeof(rdata->recordinfo), &rdata->recordinfo);
	}
#endif

	if (FUNC10(queue->q, item) == NULL)
		{
		FUNC2(rdata);
		FUNC8(item);
		return(0);
		}

	s->packet = NULL;
	s->packet_length = 0;
	FUNC7(&(s->s3->rbuf), 0, sizeof(SSL3_BUFFER));
	FUNC7(&(s->s3->rrec), 0, sizeof(SSL3_RECORD));
	
	if (!FUNC12(s))
		{
		FUNC5(SSL_F_DTLS1_BUFFER_RECORD, ERR_R_INTERNAL_ERROR);
		FUNC2(rdata);
		FUNC8(item);
		return(0);
		}
	
	return(1);
	}