#define NULL ((void*)0)
typedef unsigned long size_t;  // Customize by platform.
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;  // Either arithmetic or pointer type.
/* By default, we understand bool (as a convenience). */
typedef int bool;
#define false 0
#define true 1

/* Forward declarations */

/* Type definitions */
typedef  scalar_t__ u_short ;
struct in_addr {int dummy; } ;
struct hostent {scalar_t__* h_addr_list; } ;

/* Variables and functions */
 scalar_t__ TRY_AGAIN ; 
 int FUNC0 (char*,struct in_addr*,scalar_t__) ; 
 int /*<<< orphan*/  FUNC1 (char*,char*,int /*<<< orphan*/ ) ; 
 scalar_t__ errno ; 
 struct hostent* FUNC2 (char*) ; 
 scalar_t__ h_errno ; 
 int /*<<< orphan*/  FUNC3 (scalar_t__) ; 
 scalar_t__ FUNC4 (char*,struct in_addr*) ; 
 char* FUNC5 (char*,char) ; 
 scalar_t__ FUNC6 (char*,int /*<<< orphan*/ *,int /*<<< orphan*/ ) ; 
 int /*<<< orphan*/  FUNC7 (int) ; 

int FUNC8(char *arg)
{
	int i;
	struct hostent *he;
	struct in_addr *in, ip;
	char *port_str;
	u_short port = 0;

	if(!arg) return -1;
	
	if((port_str = FUNC5(arg, ':'))) {
		*port_str = '\0';
		port_str++;
		if(*port_str) port = (u_short)FUNC6(port_str, NULL, 0);
	}

	/* don't resolve if we don't have to */
	if(FUNC4(arg, &ip)) return FUNC0(arg, &ip, port);

	/* not an IP, so resolve */
	errno = 0;
	he = FUNC2(arg);
	if(!he && h_errno == TRY_AGAIN) {
		FUNC7(500000);
		he = FUNC2(arg);
	}

	if(!he) FUNC1("Failed to resolve %s: %s", arg, FUNC3(h_errno));

	/* add all the IP's as targets */
	for(i = 0; he->h_addr_list[i]; i++) {
		in = (struct in_addr *)he->h_addr_list[i];
		FUNC0(arg, in, port);
	}

	return 0;
}