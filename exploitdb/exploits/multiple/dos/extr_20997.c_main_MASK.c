#define NULL ((void*)0)
typedef unsigned long size_t;  // Customize by platform.
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;  // Either arithmetic or pointer type.
/* By default, we understand bool (as a convenience). */
typedef int bool;
#define false 0
#define true 1

/* Forward declarations */
typedef  struct TYPE_2__   TYPE_1__ ;

/* Type definitions */
typedef  int time_t ;
typedef  int /*<<< orphan*/  them ;
struct timeval {int tv_usec; scalar_t__ tv_sec; } ;
struct TYPE_2__ {int /*<<< orphan*/  s_addr; } ;
struct sockaddr_in {TYPE_1__ sin_addr; int /*<<< orphan*/  sin_port; int /*<<< orphan*/  sin_family; } ;
struct sockaddr {int dummy; } ;
typedef  int /*<<< orphan*/  prebuf ;
typedef  int /*<<< orphan*/  op ;
typedef  int /*<<< orphan*/  me ;

/* Variables and functions */
 int /*<<< orphan*/  AF_INET ; 
 scalar_t__ EAGAIN ; 
 scalar_t__ EINPROGRESS ; 
 scalar_t__ ENOBUFS ; 
 scalar_t__ EWOULDBLOCK ; 
 int /*<<< orphan*/  F_GETFL ; 
 int /*<<< orphan*/  F_SETFL ; 
 int /*<<< orphan*/  IPPROTO_TCP ; 
 int NEW_MSS ; 
 int O_NONBLOCK ; 
 int /*<<< orphan*/  SOCK_STREAM ; 
 int /*<<< orphan*/  SOL_SOCKET ; 
 scalar_t__ TCP_MAXSEG ; 
 int /*<<< orphan*/  TCP_NODELAY ; 
 int /*<<< orphan*/  FUNC0 (char*) ; 
 int /*<<< orphan*/  FUNC1 (int) ; 
 scalar_t__ FUNC2 (int,struct sockaddr*,int) ; 
 int /*<<< orphan*/  FUNC3 (int,char*) ; 
 scalar_t__ errno ; 
 int FUNC4 (int,int /*<<< orphan*/ ,int) ; 
 scalar_t__ FUNC5 (int,struct sockaddr*,int*) ; 
 int /*<<< orphan*/  FUNC6 (int,int /*<<< orphan*/ ,scalar_t__,char*,int*) ; 
 int /*<<< orphan*/  FUNC7 (struct sockaddr_in*,struct sockaddr_in*) ; 
 int /*<<< orphan*/  FUNC8 (char*) ; 
 int /*<<< orphan*/  FUNC9 (char*,int /*<<< orphan*/ ,int) ; 
 int /*<<< orphan*/  FUNC10 (int /*<<< orphan*/ ) ; 
 int /*<<< orphan*/  FUNC11 (int,int) ; 
 int /*<<< orphan*/  FUNC12 (char*,int) ; 
 int FUNC13 (int,char*,int) ; 
 int /*<<< orphan*/  FUNC14 (int,int /*<<< orphan*/ *,int /*<<< orphan*/ *,int /*<<< orphan*/ *,struct timeval*) ; 
 int /*<<< orphan*/  FUNC15 (int,int /*<<< orphan*/ ,int /*<<< orphan*/ ,int*,int) ; 
 int FUNC16 (int /*<<< orphan*/ ,int /*<<< orphan*/ ,int /*<<< orphan*/ ) ; 
 int FUNC17 (int /*<<< orphan*/ *) ; 
 int /*<<< orphan*/  FUNC18 (char*) ; 

int
FUNC19(int argc, char *argv[])
{
	struct sockaddr_in me, them;
	int fd, op, olen, mss;
	char prebuf[16374];
	time_t now1, now2;
	struct timeval tv;

	mss = NEW_MSS;

	FUNC11(-1, mss);

	fd = FUNC16(AF_INET, SOCK_STREAM, 0);
	if (fd == -1)
		FUNC3(1, "socket");

	FUNC9((char *)&them, 0, sizeof(me));
	them.sin_family = AF_INET;
	them.sin_port = FUNC10(FUNC0(argv[2]));
	them.sin_addr.s_addr = FUNC8(argv[1]);

	FUNC11(fd, mss);

	op = FUNC4(fd, F_GETFL, 0);
	if (op != -1) {
		op |= O_NONBLOCK;
		FUNC4(fd, F_SETFL, op);
	}

	op = 1;
	(void) FUNC15(fd, SOL_SOCKET, TCP_NODELAY, &op, sizeof(op));

	if (FUNC2(fd, (struct sockaddr *)&them, sizeof(them)) &&
	    (errno != EINPROGRESS))
		FUNC3(1, "connect");

	olen = sizeof(op);
	if (!FUNC6(fd, IPPROTO_TCP, TCP_MAXSEG, (char *)&op, &olen))
		FUNC12("Remote mss %d\n", op);
	else
		FUNC3(1, "getsockopt");

#if HACKED_KERNEL
	olen = sizeof(op);
	if (!getsockopt(fd, IPPROTO_TCP, TCP_MAXSEG+1, (char *)&op, &olen))
		printf("Our mss %d\n", op);
	else
		err(1, "getsockopt(+1)");
#endif

	olen = sizeof(me);
	if (FUNC5(fd, (struct sockaddr *)&me, &olen))
		FUNC3(1, "getsockname");

	(void) FUNC13(fd, prebuf, sizeof(prebuf));

	now1 = FUNC17(NULL);
	for (op = 2; op; op--) {
		FUNC7(&me, &them);
		olen = FUNC13(fd, prebuf, sizeof(prebuf));
		if (olen == -1) {
			if (errno == ENOBUFS || errno == EAGAIN ||
			    errno == EWOULDBLOCK) {
				tv.tv_sec = 0;
				tv.tv_usec = 10000;
				FUNC14(3, NULL, NULL, NULL, &tv);
				continue;
			}
			FUNC18("read");
			break;
		}
	}
	now2 = FUNC17(NULL);
	FUNC12("Elapsed time %d\n", now2 - now1);

	FUNC11(fd, 0);
	FUNC1(fd);
	return 0;
}