#define NULL ((void*)0)
typedef unsigned long size_t;  // Customize by platform.
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;  // Either arithmetic or pointer type.
/* By default, we understand bool (as a convenience). */
typedef int bool;
#define false 0
#define true 1

/* Forward declarations */

/* Type definitions */
struct args {char* file_path; int /*<<< orphan*/ * pipe_fd; } ;
typedef  int pid_t ;

/* Variables and functions */
 int CLONE_NEWUSER ; 
 int /*<<< orphan*/  O_RDWR ; 
 int PATH_MAX ; 
 int SIGCHLD ; 
 scalar_t__ STACK_SIZE ; 
 int /*<<< orphan*/  FUNC0 (int) ; 
 int /*<<< orphan*/  child ; 
 scalar_t__ child_stack ; 
 int FUNC1 (int /*<<< orphan*/ ,scalar_t__,int,struct args*) ; 
 int /*<<< orphan*/  FUNC2 (int /*<<< orphan*/ ) ; 
 int FUNC3 () ; 
 int FUNC4 (char*,int /*<<< orphan*/ ) ; 
 int FUNC5 (int /*<<< orphan*/ *) ; 
 int /*<<< orphan*/  FUNC6 (char*,int,char*,long) ; 
 scalar_t__ FUNC7 (char*) ; 
 int FUNC8 (int,int /*<<< orphan*/ *,int /*<<< orphan*/ ) ; 
 scalar_t__ FUNC9 (int,char*,scalar_t__) ; 

int FUNC10(int argc, char *argv[]) {
    int fd;
    pid_t pid;
    char mapping[1024];
    char map_file[PATH_MAX];
    struct args f_args;

    FUNC0(argc == 2);

    f_args.file_path = argv[1];
    // create a pipe for synching the child and parent
    FUNC0(FUNC5(f_args.pipe_fd) != -1);

    pid = FUNC1(child, child_stack + STACK_SIZE, CLONE_NEWUSER | SIGCHLD, &f_args);
    FUNC0(pid != -1);

    // get the current uid outside the namespace
    FUNC6(mapping, 1024, "0 %d 1\n", FUNC3()); 

    // update uid and gid maps in the child
    FUNC6(map_file, PATH_MAX, "/proc/%ld/uid_map", (long) pid);
    fd = FUNC4(map_file, O_RDWR); FUNC0(fd != -1);

    FUNC0(FUNC9(fd, mapping, FUNC7(mapping)) == FUNC7(mapping));
    FUNC2(f_args.pipe_fd[1]);

    FUNC0 (FUNC8(pid, NULL, 0) != -1);
}