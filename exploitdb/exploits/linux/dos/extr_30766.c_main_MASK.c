#define NULL ((void*)0)
typedef unsigned long size_t;  // Customize by platform.
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;  // Either arithmetic or pointer type.
/* By default, we understand bool (as a convenience). */
typedef int bool;
#define false 0
#define true 1

/* Forward declarations */

/* Type definitions */
struct rlimit {int rlim_cur; } ;
typedef  int /*<<< orphan*/  TAR ;

/* Variables and functions */
 int O_CREAT ; 
 int O_WRONLY ; 
 int /*<<< orphan*/  RLIMIT_STACK ; 
 int /*<<< orphan*/  TAR_GNU ; 
 int /*<<< orphan*/  errno ; 
 int /*<<< orphan*/  FUNC0 (int,int /*<<< orphan*/ ,char*,...) ; 
 scalar_t__ FUNC1 (int /*<<< orphan*/ ,struct rlimit*) ; 
 char* FUNC2 (unsigned int) ; 
 int /*<<< orphan*/  FUNC3 (char*,char*,int) ; 
 scalar_t__ FUNC4 (int /*<<< orphan*/ *,char*,char*) ; 
 scalar_t__ FUNC5 (int /*<<< orphan*/ *) ; 
 scalar_t__ FUNC6 (int /*<<< orphan*/ **,char const*,int /*<<< orphan*/ *,int,int,int /*<<< orphan*/ ) ; 

int FUNC7(int ac, const char *av[])
{
	struct rlimit r;
	unsigned count, i;
	char *s;
	TAR *t;

	if (ac != 2)
		FUNC0(1, 0, "exactly two arguments expected");

	if (FUNC1(RLIMIT_STACK, &r))
		FUNC0(1, errno, "getrlimit RLIMIT_STACK");

	count = r.rlim_cur / 3 + 1;
	if (!(s = FUNC2(count * 3 + 1)))
		FUNC0(1, errno, "malloc: %u", count * 3 + 1);

	for (i = 0; i < count; ++i)
		FUNC3(s + i * 3, "../", 3);
	s[count * 3] = '\0';

	if (FUNC6(&t, av[1], NULL, O_WRONLY|O_CREAT, 0644, TAR_GNU))
		FUNC0(1, errno, "tar_open: %s", av[1]);

	if (FUNC4(t, "/dev/null", s))
		FUNC0(1, errno, "tar_append_file: %s", av[1]);

	if (FUNC5(t))
		FUNC0(1, errno, "tar_close");

	return 0;
}