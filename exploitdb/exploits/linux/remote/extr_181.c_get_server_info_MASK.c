#define NULL ((void*)0)
typedef unsigned long size_t;  // Customize by platform.
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;  // Either arithmetic or pointer type.
/* By default, we understand bool (as a convenience). */
typedef int bool;
#define false 0
#define true 1

/* Forward declarations */

/* Type definitions */
typedef  char u8 ;
typedef  int /*<<< orphan*/  u32 ;
typedef  int /*<<< orphan*/  u16 ;
typedef  int /*<<< orphan*/  pkt ;

/* Variables and functions */
 scalar_t__ FUNC0 (int,int) ; 
 int /*<<< orphan*/  FUNC1 (int /*<<< orphan*/ ) ; 
 int /*<<< orphan*/  FUNC2 (int /*<<< orphan*/ ) ; 
 int /*<<< orphan*/  FUNC3 (char*,...) ; 
 int /*<<< orphan*/  FUNC4 (char*,char*) ; 
 int /*<<< orphan*/  stdout ; 
 scalar_t__ FUNC5 (char*) ; 
 int FUNC6 (int,int /*<<< orphan*/ *,int /*<<< orphan*/ *,char*,int) ; 
 int FUNC7 (int,int /*<<< orphan*/ ,int /*<<< orphan*/ ,char*,scalar_t__) ; 

int
FUNC8( int sock, u32 addr, u16 port)
{
   u32 r_addr;
   u16 r_port;
   int n, i;
   u8  pkt[256], *str;

   pkt[0] = pkt[1] = pkt[2] = pkt[3] = 0xff;
   FUNC4(&pkt[4], "details");

   n = FUNC7(sock, addr, port, pkt, FUNC5(pkt));
   FUNC3(".  connecting to the server...  "); FUNC2(stdout);
   if (FUNC0(sock, 6)<0)
       goto server_down;
   n = FUNC6(sock, &addr, &port, pkt, sizeof(pkt));
   if (n<0)
	{
server_down:
	FUNC3("\bserver down!\r*\n");
	FUNC1(0);
	}
   FUNC3("\bdone\n");
   str = &pkt[4]; 
   str+=FUNC5(str)+1;
   FUNC3("\t server_name  [%s]\n", str); str+=FUNC5(str)+1;
   FUNC3("\t    map_name  [%s]\n", str); str+=FUNC5(str)+1;
   str+=FUNC5(str)+1;

   FUNC3("\t   game_name  [%s]\n", str); str+=FUNC5(str)+1;
   FUNC3("\tusers_online  [%d of %d]\n", str[0], str[1]); str+=3;
   FUNC3("\t   remote_OS  [%s]\n", (str[1]=='w' ? "windows" : (str[1]=='l' ? "linux" : "unknown")));
   if (str[1]=='w') return 2;
   if (str[1]=='l') return 1;
   return 0;
}