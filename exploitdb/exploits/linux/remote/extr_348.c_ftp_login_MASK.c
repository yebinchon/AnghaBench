#define NULL ((void*)0)
typedef unsigned long size_t;  // Customize by platform.
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;  // Either arithmetic or pointer type.
/* By default, we understand bool (as a convenience). */
typedef int bool;
#define false 0
#define true 1

/* Forward declarations */

/* Type definitions */
typedef  int /*<<< orphan*/  resp ;

/* Variables and functions */
 int /*<<< orphan*/  FUNC0 (int) ; 
 int /*<<< orphan*/  ftp_banner ; 
 int /*<<< orphan*/  FUNC1 (int,char*,int,char*) ; 
 scalar_t__ FUNC2 (char*,char*,int) ; 
 int /*<<< orphan*/  FUNC3 (char*,char,int) ; 
 int FUNC4 (int /*<<< orphan*/ *,char*,int,int) ; 
 scalar_t__ FUNC5 (int,char*,int,int) ; 
 int /*<<< orphan*/  FUNC6 (int,char*,char*) ; 
 int /*<<< orphan*/  FUNC7 (char*,char*) ; 
 int /*<<< orphan*/  FUNC8 (char*) ; 
 scalar_t__ verbose ; 

int
FUNC9 (char *host, char *user, char *pass)
{
        int     ftpsock;
        char    resp[512];


        ftpsock = FUNC4 (NULL, host, 21, 30);
        if (ftpsock <= 0)
                return (0);

        FUNC3 (resp, '\x00', sizeof (resp));
        if (FUNC5 (ftpsock, resp, sizeof (resp) - 1, 20) <= 0)
                goto flerr;

        /* handle multiline pre-login stuff (rfc violation !)
         */
        if (FUNC2 (resp, "220-", 4) == 0)
                FUNC1 (ftpsock, resp, sizeof (resp), "220 ");

        if (FUNC2 (resp, "220 ", 4) != 0) {
                if (verbose)
                        FUNC7 ("\n%s\n", resp);
                goto flerr;
        }
        ftp_banner = FUNC8 (resp);

        FUNC6 (ftpsock, "USER %s\n", user);
        FUNC3 (resp, '\x00', sizeof (resp));
        if (FUNC5 (ftpsock, resp, sizeof (resp) - 1, 20) <= 0)
                goto flerr;

        if (FUNC2 (resp, "331 ", 4) != 0) {
                if (verbose)
                        FUNC7 ("\n%s\n", resp);
                goto flerr;
        }

        FUNC6 (ftpsock, "PASS %s\n", pass);
        FUNC3 (resp, '\x00', sizeof (resp));
        if (FUNC5 (ftpsock, resp, sizeof (resp) - 1, 20) <= 0)
                goto flerr;


        /* handle multiline responses from ftp servers
         */
        if (FUNC2 (resp, "230-", 4) == 0)
                FUNC1 (ftpsock, resp, sizeof (resp), "230 ");

        if (FUNC2 (resp, "230 ", 4) != 0) {
                if (verbose)
                        FUNC7 ("\n%s\n", resp);
                goto flerr;
        }

        return (ftpsock);

flerr:
        if (ftpsock > 0)
                FUNC0 (ftpsock);

        return (0);
}