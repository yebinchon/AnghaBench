#define NULL ((void*)0)
typedef unsigned long size_t;  // Customize by platform.
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;  // Either arithmetic or pointer type.
/* By default, we understand bool (as a convenience). */
typedef int bool;
#define false 0
#define true 1

/* Forward declarations */

/* Type definitions */
typedef  int /*<<< orphan*/  tv ;
struct timeval {int /*<<< orphan*/  sin_addr; scalar_t__ tv_usec; int /*<<< orphan*/  tv_sec; int /*<<< orphan*/  sin_family; int /*<<< orphan*/  sin_port; } ;
struct sockaddr_in {int /*<<< orphan*/  sin_addr; scalar_t__ tv_usec; int /*<<< orphan*/  tv_sec; int /*<<< orphan*/  sin_family; int /*<<< orphan*/  sin_port; } ;
struct sockaddr {int dummy; } ;
struct c_info {int port; char* hostname; } ;
typedef  int /*<<< orphan*/  sa ;
typedef  int /*<<< orphan*/  fd_set ;
typedef  int /*<<< orphan*/  err ;

/* Variables and functions */
 int /*<<< orphan*/  AF_INET ; 
 int /*<<< orphan*/  BLACK ; 
 int /*<<< orphan*/  BRIGHT ; 
 int /*<<< orphan*/  DEFAULT ; 
 int ECONNREFUSED ; 
 int EHOSTUNREACH ; 
 scalar_t__ EINPROGRESS ; 
 int /*<<< orphan*/  FUNC0 (int,int /*<<< orphan*/ *) ; 
 int /*<<< orphan*/  F_SETFL ; 
 int /*<<< orphan*/  IPPROTO_IP ; 
 int MAXHOSTS ; 
 int /*<<< orphan*/  O_NONBLOCK ; 
 int /*<<< orphan*/  RED ; 
 int /*<<< orphan*/  RESET ; 
 int /*<<< orphan*/  SOCK_STREAM ; 
 int /*<<< orphan*/  SOL_SOCKET ; 
 int /*<<< orphan*/  SO_ERROR ; 
 int /*<<< orphan*/  TIMEOUT ; 
 int /*<<< orphan*/  FUNC1 (struct timeval*,int) ; 
 int /*<<< orphan*/  FUNC2 (int) ; 
 int FUNC3 (int,struct sockaddr*,int) ; 
 scalar_t__ errno ; 
 int /*<<< orphan*/  FUNC4 (int) ; 
 int FUNC5 (int,int /*<<< orphan*/ ,int /*<<< orphan*/ ) ; 
 int /*<<< orphan*/  FUNC6 (char*,int) ; 
 int /*<<< orphan*/  FUNC7 (int /*<<< orphan*/ ,char*,...) ; 
 int /*<<< orphan*/  FUNC8 (int,int /*<<< orphan*/ ,int /*<<< orphan*/ ,int*,int*) ; 
 int /*<<< orphan*/  FUNC9 (int) ; 
 int /*<<< orphan*/  FUNC10 (char*,int /*<<< orphan*/ *) ; 
 int /*<<< orphan*/  FUNC11 (char*) ; 
 int /*<<< orphan*/  FUNC12 (char*,char*,int) ; 
 int /*<<< orphan*/  FUNC13 (int /*<<< orphan*/ ) ; 
 int FUNC14 (int,int /*<<< orphan*/ *,int /*<<< orphan*/ *,int /*<<< orphan*/ *,struct timeval*) ; 
 int FUNC15 (int /*<<< orphan*/ ,int /*<<< orphan*/ ,int /*<<< orphan*/ ) ; 
 int* sockfd ; 
 int /*<<< orphan*/  stderr ; 
 int /*<<< orphan*/  FUNC16 (int /*<<< orphan*/ ,int /*<<< orphan*/ ,int /*<<< orphan*/ ) ; 

void FUNC17 (struct c_info *scanme)
{
	int *fd,i,l,c,err;
	fd_set wr;
	struct c_info *scanme_ptr;
	struct sockaddr_in sa;
	struct timeval tv;
  
	scanme_ptr = (struct c_info *) scanme;
	/* find a socket to use */
	for(i = 0;i < MAXHOSTS; i++)
	{
		if(!sockfd[i])
		{
			fd = &sockfd[i];
			break;
		 }
	}
    
	if((*fd = FUNC15(AF_INET,SOCK_STREAM,IPPROTO_IP)) == (-1))
	{
		FUNC11("\nsocket");
		FUNC4(-1);
	}

	FUNC1(&sa, sizeof(sa));
	FUNC1(&tv, sizeof(tv));

	sa.sin_port   = FUNC9(scanme_ptr->port);
	sa.sin_family = AF_INET;   
	tv.tv_sec     = TIMEOUT;
	tv.tv_usec    = 0;
   
	if(!FUNC10(scanme_ptr->hostname,&sa.sin_addr))
	{   
		FUNC7(stderr,"inet_aton error\n");
		FUNC13(0);
	}
    
	/* start non-blocking on socket */
	if((FUNC5(*fd,F_SETFL,O_NONBLOCK))==(-1))
	{
		FUNC7(stderr,"fcntl error\n");
		FUNC13(0);
	}
	
	/* try to make an inital connection to the host */
	if((c = FUNC3(*fd, (struct sockaddr *)&sa, sizeof(sa)))==(-1))
	{
		if(errno != EINPROGRESS)
		{
			FUNC2(*fd);
			/*printf("connect didnt have EINPROGRESS"); */
			FUNC13(0);
		}
	}
	else if (c == 0)
	{
		FUNC12("\t[%s]\tMySQLD running on port %d\n", 
			scanme_ptr->hostname, scanme_ptr->port);
		FUNC13(0);
	}

	l = sizeof(err);
	
	/* check the socket for writing. */
	FUNC0(*fd,&wr);
	
	if((c=FUNC14(*fd+1,NULL,&wr,NULL, &tv))==(0))     
	{
		FUNC2(*fd);
		/*printf("select for wr on connect() timeout");*/
		FUNC13(0);
	}
	else if(c == (-1)) /* redundant */
	{
		FUNC2(*fd);    /* for some generic select() error */
		/*printf("generic select error for connect() wr");*/
		FUNC13(0);
	}
    
	/* use getsockopt() to see if we connected successfully */
	FUNC8(*fd,SOL_SOCKET,SO_ERROR,&err,&l);

	/* printf("sockopt: %d on %s\n",err,scanme_ptr->hostname);*/
   
	/* lets see what we have to work with now */
	if(err == ECONNREFUSED)
	{     
		FUNC2(*fd);                
		/*printf("connection refused at %s\n",scanme_ptr->hostname);*/
		FUNC13(0);
	}
	else if(err == EHOSTUNREACH)
	{
		FUNC2(*fd);                              
		/*printf("host unreachable at %s",scanme_ptr->hostname);*/
		FUNC13(0);
	}
	FUNC16(BRIGHT, RED, BLACK);
	FUNC7(stderr, "\t[%s]\tMySQLD running on port %d\n",
		scanme_ptr->hostname, scanme_ptr->port);
	FUNC16(RESET, DEFAULT, DEFAULT);
	
	FUNC2(*fd);
	
	FUNC6(scanme_ptr->hostname, scanme_ptr->port);
	
	FUNC13(0);
}