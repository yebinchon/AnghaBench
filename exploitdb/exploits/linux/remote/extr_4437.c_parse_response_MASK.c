#define NULL ((void*)0)
typedef unsigned long size_t;  // Customize by platform.
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;  // Either arithmetic or pointer type.
/* By default, we understand bool (as a convenience). */
typedef int bool;
#define false 0
#define true 1

/* Forward declarations */

/* Type definitions */
typedef  int /*<<< orphan*/  FILE ;

/* Variables and functions */
 int /*<<< orphan*/  FUNC0 (int /*<<< orphan*/ *) ; 
 int /*<<< orphan*/ * FUNC1 (char*,char*) ; 
 int /*<<< orphan*/  FUNC2 (int /*<<< orphan*/ *,char*,char*) ; 
 int /*<<< orphan*/  FUNC3 (char*,...) ; 
 int /*<<< orphan*/  FUNC4 (char*,char*,int*) ; 
 int /*<<< orphan*/ * stdout ; 
 int /*<<< orphan*/  FUNC5 (char*,char) ; 
 scalar_t__ FUNC6 (char*) ; 
 char* FUNC7 (char*,char*) ; 
 char* FUNC8 (char*,char*) ; 

void FUNC9(char *response, int response_length, char *output) {
   char *p;
   int http_code;
   int header_mode = 1;
   int size;
   int bytes = 0;
   FILE *fp = stdout;

   p = FUNC8(response, "\r\n");
   while (p) {
      /* header mode active? */
      if (header_mode) {
         if (FUNC7(p, "HTTP/1.1 ") == p) {
            FUNC4(p, "HTTP/1.1 %d", &http_code);
            if (http_code == 200) {
               FUNC3("[*] request successful\n");
            } else {
               FUNC3("[*] request failed (error code: %d)\n", http_code);
            }
         } else if (FUNC7(p, "Server: ") == p) {
            FUNC3("[*] server version: %s\n", FUNC7(p, "Server: ") + 8);
         /* content length for first content */
         } else if (!FUNC5(p, ':') && http_code == 200) {
            FUNC4(p, "%x", &size);
            header_mode = 0;
            if (output) {
               fp = FUNC1(output, "w");
            }
         }
      } else {
         if (bytes < size) {
            FUNC2(fp, "%s\n", p);
            bytes += FUNC6(p) + 1;
         }
      }
      p = FUNC8(NULL, "\r\n");
   }
   if (fp != stdout && fp != NULL) {
      FUNC3("[*] %d bytes written to %s\n", bytes, output);
      FUNC0(fp);
   }
}