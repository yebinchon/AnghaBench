#define NULL ((void*)0)
typedef unsigned long size_t;  // Customize by platform.
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;  // Either arithmetic or pointer type.
/* By default, we understand bool (as a convenience). */
typedef int bool;
#define false 0
#define true 1

/* Forward declarations */
typedef  struct TYPE_2__   TYPE_1__ ;

/* Type definitions */
struct TYPE_2__ {int /*<<< orphan*/  s_addr; } ;
struct sockaddr_in {int sin_port; int fd; int events; int revents; TYPE_1__ sin_addr; int /*<<< orphan*/  sin_family; } ;
struct sockaddr {int dummy; } ;
struct pollfd {int sin_port; int fd; int events; int revents; TYPE_1__ sin_addr; int /*<<< orphan*/  sin_family; } ;
typedef  int /*<<< orphan*/  s_in ;
typedef  int /*<<< orphan*/  pfd ;

/* Variables and functions */
 int /*<<< orphan*/  AF_INET ; 
 int /*<<< orphan*/  INADDR_ANY ; 
 int /*<<< orphan*/  IPPROTO_TCP ; 
 int POLLERR ; 
 int POLLHUP ; 
 int POLLIN ; 
 int POLLNVAL ; 
 int /*<<< orphan*/  SOCK_STREAM ; 
 int FUNC0 (int,struct sockaddr_in*,int*) ; 
 scalar_t__ FUNC1 (int,struct sockaddr*,int) ; 
 int /*<<< orphan*/  bind_addr ; 
 int bindport ; 
 int /*<<< orphan*/  FUNC2 (int) ; 
 int /*<<< orphan*/  FUNC3 (int) ; 
 int /*<<< orphan*/  errno ; 
 int /*<<< orphan*/  FUNC4 (char*,...) ; 
 int /*<<< orphan*/  FUNC5 (int /*<<< orphan*/ ,char*,...) ; 
 int FUNC6 (int) ; 
 char* FUNC7 (TYPE_1__) ; 
 int /*<<< orphan*/  FUNC8 (int,int) ; 
 int /*<<< orphan*/  FUNC9 (struct sockaddr_in*,int /*<<< orphan*/ ,int) ; 
 int FUNC10 (struct sockaddr_in*,int,int) ; 
 int FUNC11 (int /*<<< orphan*/ ,int /*<<< orphan*/ ,int /*<<< orphan*/ ) ; 
 int /*<<< orphan*/  stderr ; 
 int /*<<< orphan*/  FUNC12 (int /*<<< orphan*/ ) ; 
 scalar_t__ use_bind_addr ; 

__attribute__((used)) static void
FUNC13 (void)
{
	int sd, val, fsd, slen;
	struct sockaddr_in s_in;
	struct pollfd pfd;
	
	if ((sd = FUNC11 (AF_INET, SOCK_STREAM, IPPROTO_TCP)) < 0)
		FUNC4 ("socket(): %s\n", FUNC12 (errno));

	FUNC9 (&s_in, 0, sizeof (s_in));
	s_in.sin_family = AF_INET;
	s_in.sin_addr.s_addr = (use_bind_addr ? bind_addr : INADDR_ANY);
	s_in.sin_port = FUNC6 (bindport);

	if (FUNC1 (sd, (struct sockaddr *) &s_in, sizeof (s_in)) < 0)
		FUNC4 ("bind(): %s\n", FUNC12 (errno));

	FUNC8 (sd, 5);

	FUNC5 (stderr, "awaiting connection from client...\n");

	FUNC9 (&pfd, 0, sizeof (pfd));
	pfd.fd = sd;
	pfd.events = POLLIN;

	if ((val = FUNC10 (&pfd, 1, 20 * 1000)) < 0)
		FUNC4 ("poll(): %s\n", FUNC12 (errno));

	if (val < 1 || pfd.revents & (POLLERR | POLLNVAL | POLLHUP) || !(pfd.revents & POLLIN))
		FUNC4 ("no connection from client in 20 seconds. aborting\n");

	FUNC9 (&s_in, 0, sizeof (s_in));
	slen = sizeof (s_in);
	fsd = FUNC0 (sd, &s_in, &slen);
	FUNC3 (sd);

	if (fsd < 0)
		FUNC4 ("accept(): %s\n", FUNC12 (errno));

	FUNC5 (stderr, "received connection from %s:%i\n",
			FUNC7 (s_in.sin_addr),
			FUNC6 (s_in.sin_port));

	FUNC2 (fsd);
}