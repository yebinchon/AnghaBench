#define NULL ((void*)0)
typedef unsigned long size_t;  // Customize by platform.
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;  // Either arithmetic or pointer type.
/* By default, we understand bool (as a convenience). */
typedef int bool;
#define false 0
#define true 1

/* Forward declarations */

/* Type definitions */
typedef  int /*<<< orphan*/  tmp_lib ;
typedef  int /*<<< orphan*/  prefixes ;
typedef  int /*<<< orphan*/  cmd ;
typedef  int /*<<< orphan*/  buf ;
typedef  int /*<<< orphan*/  FILE ;

/* Variables and functions */
 scalar_t__ EXIT_SUCCESS ; 
 char* LDSO ; 
 int /*<<< orphan*/  FUNC0 (char const* const,char*) ; 
 int /*<<< orphan*/  FUNC1 () ; 
 char* FUNC2 (char*,int,int /*<<< orphan*/ * const) ; 
 scalar_t__ FUNC3 (int /*<<< orphan*/ * const) ; 
 int /*<<< orphan*/ * FUNC4 (char*,char*) ; 
 int /*<<< orphan*/  FUNC5 (char*,unsigned int,char*) ; 
 scalar_t__ FUNC6 (char*,int,char*,char const* const,char const* const,...) ; 
 char* FUNC7 (char const* const,char) ; 
 int FUNC8 (char const* const) ; 
 scalar_t__ FUNC9 (char const* const,char*,int) ; 
 int FUNC10 (char const* const,char*) ; 

__attribute__((used)) static void
FUNC11(const char * const bin, const char * const dir)
{
    if (!bin) FUNC1();
    if (*bin != '/') FUNC1();
    if (FUNC10(bin, "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+,-./_") != FUNC8(bin)) FUNC1();

    if (!dir) FUNC1();
    if (*dir != '/') FUNC1();
    if (dir[FUNC8(dir)-1] != '/') FUNC1();

    char cmd[256];
    if ((unsigned int)FUNC6(cmd, sizeof(cmd), "/usr/bin/env - %s --list %s", LDSO, bin)
                                 >= sizeof(cmd)) FUNC1();
    FILE * const fp = FUNC4(cmd, "r");
    if (!fp) FUNC1();

    char buf[256];
    unsigned int num_libs = 0;
    while (FUNC2(buf, sizeof(buf), fp) == buf) {
        if (!FUNC7(buf, '\n')) FUNC1();

        const char * const rel_lib = buf + FUNC10(buf, "\t ");
        if (FUNC9(rel_lib, "lib", 3)) continue;

        char * sp = FUNC7(rel_lib, ' ');
        if (!sp) FUNC1();
        if (FUNC9(sp, " => /", 5)) FUNC1();
        *sp = '\0';
        if (FUNC7(rel_lib, '/')) FUNC1();

        const char * const abs_lib = sp + 4;
        if (*abs_lib != '/') FUNC1();
        sp = FUNC7(abs_lib, ' ');
        if (!sp) FUNC1();
        if (FUNC9(sp, " (0x", 4)) FUNC1();
        *sp = '\0';

        size_t i;
        static const char * const prefixes[] = { "", "/", "/.", "/.." };
        for (i = 0; i < sizeof(prefixes)/sizeof(*prefixes); i++) {

            char tmp_lib[256];
            if ((unsigned int)FUNC6(tmp_lib, sizeof(tmp_lib), "%s%s%s", dir, prefixes[i], rel_lib)
                                             >= sizeof(tmp_lib)) FUNC1();
            FUNC0(abs_lib, tmp_lib);
        }
        if (!++num_libs) FUNC1();
    }
    if (!num_libs) FUNC1();
    FUNC5("copied %u lib%s\n", num_libs, num_libs > 1 ? "s" : "");
    if (FUNC3(fp) != EXIT_SUCCESS) FUNC1();
}