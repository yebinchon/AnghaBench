#define NULL ((void*)0)
typedef unsigned long size_t;  // Customize by platform.
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;  // Either arithmetic or pointer type.
/* By default, we understand bool (as a convenience). */
typedef int bool;
#define false 0
#define true 1

/* Forward declarations */

/* Type definitions */
typedef  int /*<<< orphan*/  buf ;

/* Variables and functions */
 int /*<<< orphan*/  FUNC0 (char*) ; 
 int /*<<< orphan*/  FUNC1 (char*) ; 
 int /*<<< orphan*/  FUNC2 (char*) ; 
 int /*<<< orphan*/  FUNC3 (char*,int,int /*<<< orphan*/ ) ; 
 int idx ; 
 int /*<<< orphan*/  FUNC4 (char*,...) ; 
 int /*<<< orphan*/  semid ; 
 int /*<<< orphan*/  FUNC5 (char*,char*,int,...) ; 
 int /*<<< orphan*/  stdin ; 
 int val ; 

int FUNC6(int argc, char *argv[]){
	int quit;
	char buf[80], prev;

	if(argc < 2){
		FUNC4("%s <semid>\n", argv[0]);
		return 1;
	}

	semid = FUNC0(argv[1]);
	quit = 0;

	while(!quit){
		FUNC4("\n> ");
		FUNC3(buf, sizeof(buf), stdin);

		switch(buf[0]){
		case 'r':
		case 'R':
			prev = 'r';
			FUNC1(buf);
			break;

		case 'w':
		case 'W':
			prev = 'w';
			FUNC2(buf);
			break;

		case 'q':
		case 'Q':
			quit = 1;
			break;

		case 'h':
		case 'H':
			FUNC4("Enter one of the following commands:\n");
			FUNC4("\tr - read a semaphore\n");
			FUNC4("\t\tsyntax r index[.level]\n");
			FUNC4("\t\te.g. r 1\n");
			FUNC4("\t\te.g. r 1.val\n");
			FUNC4("\tw - write a value\n");
			FUNC4("\t\tsyntax w index value\n");
			FUNC4("\t\te.g. w 1 7\n");
			FUNC4("\tq - quit\n");
			break;

		case '\r':
		case '\n':
			if(prev == 'r'){
				FUNC5(buf, "r %d\n", ++idx);
				FUNC1(buf);
			}
			else if(prev == 'w'){
				FUNC5(buf, "w %d %d\n", ++idx, val);
				FUNC2(buf);
			}
			break;
			
		default:
			break;
		}
	}

	return 0;
}