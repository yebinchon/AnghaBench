#define NULL ((void*)0)
typedef unsigned long size_t;  // Customize by platform.
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;  // Either arithmetic or pointer type.
/* By default, we understand bool (as a convenience). */
typedef int bool;
#define false 0
#define true 1

/* Forward declarations */
typedef  struct TYPE_3__   TYPE_1__ ;

/* Type definitions */
struct TYPE_3__ {scalar_t__ custom; char* shaderText; char* shader; } ;
typedef  TYPE_1__ shaderInfo_t ;
typedef  int /*<<< orphan*/  FILE ;

/* Variables and functions */
 int /*<<< orphan*/  SYS_VRB ; 
 int /*<<< orphan*/  SYS_WRN ; 
 int /*<<< orphan*/  FUNC0 (int /*<<< orphan*/ ,char*,...) ; 
 int /*<<< orphan*/  FUNC1 (char*,int) ; 
 int /*<<< orphan*/  FUNC2 (int /*<<< orphan*/ *) ; 
 int /*<<< orphan*/  FUNC3 (int /*<<< orphan*/ *) ; 
 int /*<<< orphan*/ * FUNC4 (char*,char*) ; 
 int /*<<< orphan*/  FUNC5 (int /*<<< orphan*/ *,char*,char*,...) ; 
 char* mapName ; 
 char* mapShaderFile ; 
 int numShaderInfo ; 
 scalar_t__ qfalse ; 
 TYPE_1__* shaderInfo ; 

void FUNC6( void ){
	FILE            *file;
	shaderInfo_t    *si;
	int i, num;


	/* dummy check */
	if ( mapShaderFile[ 0 ] == '\0' ) {
		return;
	}

	/* are there any custom shaders? */
	for ( i = 0, num = 0; i < numShaderInfo; i++ )
	{
		if ( shaderInfo[ i ].custom ) {
			break;
		}
	}
	if ( i == numShaderInfo ) {
		return;
	}

	/* note it */
	FUNC0( SYS_VRB, "--- WriteMapShaderFile ---\n" );
	FUNC0( SYS_VRB, "Writing %s", mapShaderFile );

	/* open shader file */
	file = FUNC4( mapShaderFile, "w" );
	if ( file == NULL ) {
		FUNC0( SYS_WRN, "WARNING: Unable to open map shader file %s for writing\n", mapShaderFile );
		return;
	}

	/* print header */
	FUNC5( file,
			 "// Custom shader file for %s.bsp\n"
			 "// Generated by Q3Map2 (ydnar)\n"
			 "// Do not edit! This file is overwritten on recompiles.\n\n",
			 mapName );

	/* walk the shader list */
	for ( i = 0, num = 0; i < numShaderInfo; i++ )
	{
		/* get the shader and print it */
		si = &shaderInfo[ i ];
		if ( si->custom == qfalse || si->shaderText == NULL || si->shaderText[ 0 ] == '\0' ) {
			continue;
		}
		num++;

		/* print it to the file */
		FUNC5( file, "%s%s\n", si->shader, si->shaderText );
		//Sys_Printf( "%s%s\n", si->shader, si->shaderText ); /* FIXME: remove debugging code */

		FUNC0( SYS_VRB, "." );
	}

	/* close the shader */
	FUNC3( file );
	FUNC2( file );

	FUNC0( SYS_VRB, "\n" );

	/* print some stats */
	FUNC1( "%9d custom shaders emitted\n", num );
}