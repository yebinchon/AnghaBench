#define NULL ((void*)0)
typedef unsigned long size_t;  // Customize by platform.
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;  // Either arithmetic or pointer type.
/* By default, we understand bool (as a convenience). */
typedef int bool;
#define false 0
#define true 1

/* Forward declarations */

/* Type definitions */
typedef  int /*<<< orphan*/  vec3_t ;
typedef  int /*<<< orphan*/  entity_t ;
typedef  int /*<<< orphan*/  bspShader_t ;
typedef  int /*<<< orphan*/  bspModel_t ;
typedef  int /*<<< orphan*/  FILE ;

/* Variables and functions */
 int /*<<< orphan*/  FUNC0 (int /*<<< orphan*/ *,int /*<<< orphan*/ *,int,int /*<<< orphan*/ ) ; 
 int /*<<< orphan*/  FUNC1 (int /*<<< orphan*/ *,int /*<<< orphan*/ *,int) ; 
 int /*<<< orphan*/  FUNC2 (char*,char*) ; 
 int /*<<< orphan*/  FUNC3 (char*,char*) ; 
 int /*<<< orphan*/  FUNC4 (int /*<<< orphan*/ *,char*,int /*<<< orphan*/ ) ; 
 int /*<<< orphan*/  FUNC5 (char*) ; 
 int /*<<< orphan*/  FUNC6 (char*,...) ; 
 char* FUNC7 (int /*<<< orphan*/ *,char*) ; 
 int /*<<< orphan*/  FUNC8 (int /*<<< orphan*/ ) ; 
 int FUNC9 (char const*) ; 
 int /*<<< orphan*/ * bspModels ; 
 int /*<<< orphan*/ * bspShaders ; 
 int /*<<< orphan*/ * entities ; 
 int /*<<< orphan*/  FUNC10 (int /*<<< orphan*/ *) ; 
 int /*<<< orphan*/ * FUNC11 (char*,char*) ; 
 int /*<<< orphan*/  FUNC12 (int /*<<< orphan*/ *,char*,...) ; 
 int numBSPShaders ; 
 int numEntities ; 
 int /*<<< orphan*/  FUNC13 (char*,char*) ; 
 int /*<<< orphan*/  FUNC14 (char*,char*) ; 

int FUNC15( char *bspName ){
	int i, modelNum;
	FILE            *f;
	bspShader_t     *shader;
	bspModel_t      *model;
	entity_t        *e;
	vec3_t origin;
	const char      *key;
	char name[ 1024 ], base[ 1024 ];


	/* note it */
	FUNC6( "--- Convert BSP to ASE ---\n" );

	/* create the ase filename from the bsp name */
	FUNC14( name, bspName );
	FUNC5( name );
	FUNC13( name, ".ase" );
	FUNC6( "writing %s\n", name );

	FUNC3( bspName, base );
	FUNC13( base, ".bsp" );

	/* open it */
	f = FUNC11( name, "wb" );
	if ( f == NULL ) {
		FUNC2( "Open failed on %s\n", name );
	}

	/* print header */
	FUNC12( f, "*3DSMAX_ASCIIEXPORT\t200\r\n" );
	FUNC12( f, "*COMMENT\t\"Generated by Q3Map2 (ydnar) -convert -format ase\"\r\n" );
	FUNC12( f, "*SCENE\t{\r\n" );
	FUNC12( f, "\t*SCENE_FILENAME\t\"%s\"\r\n", base );
	FUNC12( f, "\t*SCENE_FIRSTFRAME\t0\r\n" );
	FUNC12( f, "\t*SCENE_LASTFRAME\t100\r\n" );
	FUNC12( f, "\t*SCENE_FRAMESPEED\t30\r\n" );
	FUNC12( f, "\t*SCENE_TICKSPERFRAME\t160\r\n" );
	FUNC12( f, "\t*SCENE_BACKGROUND_STATIC\t0.0000\t0.0000\t0.0000\r\n" );
	FUNC12( f, "\t*SCENE_AMBIENT_STATIC\t0.0000\t0.0000\t0.0000\r\n" );
	FUNC12( f, "}\r\n" );

	/* print materials */
	FUNC12( f, "*MATERIAL_LIST\t{\r\n" );
	FUNC12( f, "\t*MATERIAL_COUNT\t%d\r\n", numBSPShaders );
	for ( i = 0; i < numBSPShaders; i++ )
	{
		shader = &bspShaders[ i ];
		FUNC1( f, shader, i );
	}
	FUNC12( f, "}\r\n" );

	/* walk entity list */
	for ( i = 0; i < numEntities; i++ )
	{
		/* get entity and model */
		e = &entities[ i ];
		if ( i == 0 ) {
			modelNum = 0;
		}
		else
		{
			key = FUNC7( e, "model" );
			if ( key[ 0 ] != '*' ) {
				continue;
			}
			modelNum = FUNC9( key + 1 );
		}
		model = &bspModels[ modelNum ];

		/* get entity origin */
		key = FUNC7( e, "origin" );
		if ( key[ 0 ] == '\0' ) {
			FUNC8( origin );
		}
		else{
			FUNC4( e, "origin", origin );
		}

		/* convert model */
		FUNC0( f, model, modelNum, origin );
	}

	/* close the file and return */
	FUNC10( f );

	/* return to sender */
	return 0;
}