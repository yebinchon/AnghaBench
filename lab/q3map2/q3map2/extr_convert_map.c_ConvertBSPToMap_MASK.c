#define NULL ((void*)0)
typedef unsigned long size_t;  // Customize by platform.
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;  // Either arithmetic or pointer type.
/* By default, we understand bool (as a convenience). */
typedef int bool;
#define false 0
#define true 1

/* Forward declarations */

/* Type definitions */
typedef  int /*<<< orphan*/  vec3_t ;
typedef  int /*<<< orphan*/  entity_t ;
typedef  int /*<<< orphan*/  bspModel_t ;
typedef  int /*<<< orphan*/  FILE ;

/* Variables and functions */
 int /*<<< orphan*/  FUNC0 (int /*<<< orphan*/ *,int /*<<< orphan*/ *) ; 
 int /*<<< orphan*/  FUNC1 (int /*<<< orphan*/ *,int /*<<< orphan*/ *,int,int /*<<< orphan*/ ) ; 
 int /*<<< orphan*/  FUNC2 (char*,char*) ; 
 int /*<<< orphan*/  FUNC3 (char*,char*) ; 
 int /*<<< orphan*/  FUNC4 (int /*<<< orphan*/ *,char*,int /*<<< orphan*/ ) ; 
 int /*<<< orphan*/  FUNC5 (char*) ; 
 int /*<<< orphan*/  FUNC6 (char*,...) ; 
 char* FUNC7 (int /*<<< orphan*/ *,char*) ; 
 int /*<<< orphan*/  FUNC8 (int /*<<< orphan*/ ) ; 
 int FUNC9 (char const*) ; 
 int /*<<< orphan*/ * bspModels ; 
 int /*<<< orphan*/ * entities ; 
 int /*<<< orphan*/  FUNC10 (int /*<<< orphan*/ *) ; 
 int /*<<< orphan*/ * FUNC11 (char*,char*) ; 
 int /*<<< orphan*/  FUNC12 (int /*<<< orphan*/ *,char*,...) ; 
 int numEntities ; 
 int /*<<< orphan*/  FUNC13 (char*,char*) ; 
 int /*<<< orphan*/  FUNC14 (char*,char*) ; 

int FUNC15( char *bspName ){
	int i, modelNum;
	FILE            *f;
	bspModel_t      *model;
	entity_t        *e;
	vec3_t origin;
	const char      *value;
	char name[ 1024 ], base[ 1024 ];


	/* note it */
	FUNC6( "--- Convert BSP to MAP ---\n" );

	/* create the bsp filename from the bsp name */
	FUNC14( name, bspName );
	FUNC5( name );
	FUNC13( name, "_converted.map" );
	FUNC6( "writing %s\n", name );

	FUNC3( bspName, base );
	FUNC13( base, ".bsp" );

	/* open it */
	f = FUNC11( name, "wb" );
	if ( f == NULL ) {
		FUNC2( "Open failed on %s\n", name );
	}

	/* print header */
	FUNC12( f, "// Generated by Q3Map2 (ydnar) -convert -format map\n" );

	/* walk entity list */
	for ( i = 0; i < numEntities; i++ )
	{
		/* get entity */
		e = &entities[ i ];

		/* start entity */
		FUNC12( f, "// entity %d\n", i );
		FUNC12( f, "{\n" );

		/* export keys */
		FUNC0( f, e );
		FUNC12( f, "\n" );

		/* get model num */
		if ( i == 0 ) {
			modelNum = 0;
		}
		else
		{
			value = FUNC7( e, "model" );
			if ( value[ 0 ] == '*' ) {
				modelNum = FUNC9( value + 1 );
			}
			else{
				modelNum = -1;
			}
		}

		/* only handle bsp models */
		if ( modelNum >= 0 ) {
			/* get model */
			model = &bspModels[ modelNum ];

			/* get entity origin */
			value = FUNC7( e, "origin" );
			if ( value[ 0 ] == '\0' ) {
				FUNC8( origin );
			}
			else{
				FUNC4( e, "origin", origin );
			}

			/* convert model */
			FUNC1( f, model, modelNum, origin );
		}

		/* end entity */
		FUNC12( f, "}\n\n" );
	}

	/* close the file and return */
	FUNC10( f );

	/* return to sender */
	return 0;
}