#define NULL ((void*)0)
typedef unsigned long size_t;  // Customize by platform.
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;  // Either arithmetic or pointer type.
/* By default, we understand bool (as a convenience). */
typedef int bool;
#define false 0
#define true 1

/* Forward declarations */
typedef  struct TYPE_4__   TYPE_1__ ;

/* Type definitions */
struct TYPE_4__ {int /*<<< orphan*/  builder; } ;
typedef  TYPE_1__ signal_user_data_t ;
typedef  char gchar ;
typedef  int /*<<< orphan*/  GtkWindow ;

/* Variables and functions */
 int /*<<< orphan*/  FALSE ; 
 int /*<<< orphan*/  FUNC0 (int /*<<< orphan*/ ,char*) ; 
 int /*<<< orphan*/  GTK_MESSAGE_WARNING ; 
 int /*<<< orphan*/ * FUNC1 (int /*<<< orphan*/ ) ; 
 int /*<<< orphan*/  FUNC2 (char*) ; 
 int /*<<< orphan*/  FUNC3 (int) ; 
 int /*<<< orphan*/  FUNC4 (char*) ; 
 char* FUNC5 (char*,...) ; 
 int /*<<< orphan*/  FUNC6 (char*,...) ; 
 int /*<<< orphan*/  FUNC7 (int /*<<< orphan*/ *,int /*<<< orphan*/ ,char*,int /*<<< orphan*/ ,int /*<<< orphan*/ ) ; 
 int /*<<< orphan*/  FUNC8 (TYPE_1__*,char*,int /*<<< orphan*/ *,int /*<<< orphan*/ ) ; 
 int /*<<< orphan*/  FUNC9 () ; 
 int /*<<< orphan*/  FUNC10 (int*,int*,int*) ; 
 scalar_t__ FUNC11 (char*) ; 
 int /*<<< orphan*/  FUNC12 () ; 

void
FUNC13(signal_user_data_t *ud)
{
    int result = FUNC11("presets.json");
    if (result == -2)
    {
        // The above can fail if the presets file was written by a
        // more recent version of HandBrake than is currently running.
        // Look for a backup version that matches the currently running
        // version.
        GtkWindow *hb_window = FUNC1(FUNC0(ud->builder, "hb_window"));
        gchar *message = FUNC5(
            FUNC2("Presets found are newer than what is supported by this version of HandBrake!\n\n"
              "Would you like to continue?"));
        if (!FUNC7(hb_window, GTK_MESSAGE_WARNING, message,
            FUNC2("Get me out of here!"), FUNC2("Load backup presets")))
        {
            FUNC4(message);
            FUNC3(1);
        }
        FUNC4(message);

        gchar *name;
        int major, minor, micro;

        FUNC10(&major, &minor, &micro);
        name = FUNC5("presets.%d.%d.%d.json", major, minor, micro);
        FUNC6("Failed to read presets file, trying backup (%s)...", name);
        if (FUNC11(name) < 0)
        {
            FUNC6("Failed to read backup presets, using defaults...");
            FUNC9();
            // Don't store defaults unless the user explicitly saves
            // a new preset.  This would overwrite the presets file
            // that was generated by a newer version of HandBrake.
        }
        FUNC4(name);
    }
    else if (result < 0)
    {
        if (FUNC11("presets") < 0)
        {
            FUNC6("Failed to read presets file, initailizing new presets...");
            FUNC9();
            FUNC12();
        }
    }
    FUNC8(ud, "PresetCategory", NULL, FALSE);
}